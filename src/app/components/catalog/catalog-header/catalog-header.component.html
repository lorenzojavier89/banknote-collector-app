<div class="catalog-header">
  <mat-expansion-panel class="outlined-expansion-panel" hideToggle>
    <mat-expansion-panel-header>
      <mat-panel-title>Mostrando {{ count() }} billetes</mat-panel-title>
      <button mat-icon-button (click)="onGridViewModeClick($event)" >
        <mat-icon 
          class="catalog-header-icon" 
          [class.active]="viewMode() === 'GridView'" 
          [matTooltip]="gridViewModeMssg">
            grid_view
        </mat-icon>
      </button>
      <button mat-icon-button (click)="onTableViewModeClick($event)" >
        <mat-icon 
          class="catalog-header-icon material-symbols-outlined" 
          [class.active]="viewMode() === 'TableView'" 
          [matTooltip]="tableViewModeMssg">
            table_rows
        </mat-icon>
      </button>
      @if (appliedFilter().noFiltersApplied) {
        <button mat-icon-button (click)="onRemoveFiltersClick($event)" >
          <mat-icon 
            class="catalog-header-icon material-symbols-outlined" 
            [matTooltip]="noFiltersAppliedMssg">
            filter_alt
          </mat-icon>
        </button>
      } @else {
        <button mat-icon-button (click)="onRemoveFiltersClick($event)">
          <mat-icon 
            class="catalog-header-icon active" 
            [matTooltip]="removeAppliedFiltersMssg">
            filter_alt
          </mat-icon>
        </button>
      }
      <button mat-icon-button [matMenuTriggerFor]="menu" (click)="onSortMenuClick($event)">
        <mat-icon
          class="catalog-header-icon"
          [matTooltip]="sortCatalogMssg">
          swap_vert
        </mat-icon>
      </button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="onSortByClick(1)">
          <span>Orden en álbums</span>
        </button>
        <button mat-menu-item (click)="onSortByClick(2)">
          <span>Fecha de emisión (más antiguos primero)</span>
        </button>
        <button mat-menu-item (click)="onSortByClick(3)">
          <span>Fecha de emisión (más recientes primero)</span>
        </button>
      </mat-menu>  
    </mat-expansion-panel-header>
    @if (appliedFilter().someFiltersApplied)
      {
        <div class="badge-row">
          <h6 *ngFor="let f of appliedFilter().regionFilters">
            <span class="badge badge-region">{{ f.name }}</span>
          </h6>
        </div>
        <div class="badge-row">
          <h6 *ngFor="let f of appliedFilter().subregionFilters">
            <span class="badge badge-subregion">{{ f.name }}</span>
          </h6>
        </div>
        <div class="badge-row">
          <h5 *ngIf="appliedFilter().issuerFilter !== null">
            <span class="badge badge-issuer">{{ appliedFilter().issuerFilter?.name }}</span>
          </h5>
        </div>
        <div class="badge-row">
          <h5 *ngIf="appliedFilter().volumeFilter !== null">
            <span class="badge" [class]="badgeClass(appliedFilter().volumeFilterCode)">
              {{ "Álbum " + appliedFilter().volumeFilter?.name }}
            </span>
          </h5>
        </div>
      } @else {
        <div class="badge-row">
          <h5><span class="badge badge-no-filter">{{ noFiltersAppliedMssg }}</span></h5>
        </div>
      }
  </mat-expansion-panel>
  <hr />
</div>